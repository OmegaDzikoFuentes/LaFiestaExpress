<div class="min-h-screen py-8">
  <div class="max-w-2xl mx-auto px-4">
    <div class="bg-white rounded-lg shadow-lg p-8">
      <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">Checkout</h1>

      <%= form_with model: @order, url: complete_order_path(@order), method: :patch, local: true, class: "space-y-6" do |f| %>
        <!-- Contact Information -->
        <div class="bg-gray-50 rounded-lg p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-4">Contact Information</h2>
          
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <%= f.label :contact_name, "Full Name", class: "block text-gray-700 font-medium mb-2" %>
              <%= f.text_field :contact_name, required: true, 
                  class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mexican" %>
            </div>
            
            <div>
              <%= f.label :contact_phone, "Phone Number", class: "block text-gray-700 font-medium mb-2" %>
              <%= f.telephone_field :contact_phone, required: true, 
                  class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mexican" %>
            </div>
          </div>
          
          <div class="mt-4">
            <%= f.label :contact_email, "Email Address", class: "block text-gray-700 font-medium mb-2" %>
            <%= f.email_field :contact_email, required: true, 
                class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mexican" %>
          </div>
        </div>

        <!-- Pickup Information -->
        <div class="bg-gray-50 rounded-lg p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-4">Pickup Information</h2>
          
          <div>
            <%= f.label :pickup_time, "Preferred Pickup Time", class: "block text-gray-700 font-medium mb-2" %>
            <%= f.datetime_local_field :pickup_time, 
                min: 30.minutes.from_now.strftime("%Y-%m-%dT%H:%M"),
                class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mexican" %>
            <p class="text-sm text-gray-600 mt-1">Please allow at least 30 minutes for preparation</p>
          </div>
          
          <div class="mt-4">
            <%= f.label :special_instructions, "Special Instructions", class: "block text-gray-700 font-medium mb-2" %>
            <%= f.text_area :special_instructions, rows: 3,
                placeholder: "Any special requests or instructions for your order...",
                class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mexican" %>
          </div>
        </div>

        <!-- Order Summary -->
        <div class="bg-gray-50 rounded-lg p-6">
          <h2 class="text-xl font-semibold text-gray-800 mb-4">Order Summary</h2>
          
          <div class="space-y-2">
            <div class="flex justify-between">
              <span class="text-gray-600">Subtotal:</span>
              <span class="text-gray-800">$<%= sprintf("%.2f", @order.subtotal || 0) %></span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-600">Tax (8.25%):</span>
              <span class="text-gray-800">$<%= sprintf("%.2f", @order.tax || 0) %></span>
            </div>
            <div class="flex justify-between text-lg font-bold border-t pt-2">
              <span>Total:</span>
              <span class="text-mexican">$<%= sprintf("%.2f", @order.total_amount || 0) %></span>
            </div>
          </div>
        </div>

        <!-- Submit Buttons -->
        <div class="flex space-x-4">
          <%= link_to "Back to Cart", order_path(@order), 
              class: "flex-1 bg-gray-500 text-white py-3 px-6 rounded-lg font-semibold hover:bg-gray-600 transition-colors text-center" %>
          <%= f.submit "Place Order", 
              class: "flex-1 bg-mexican text-white py-3 px-6 rounded-lg font-semibold hover:bg-orange-600 transition-colors" %>
        </div>
      <% end %>
    </div>
  </div>
</div>