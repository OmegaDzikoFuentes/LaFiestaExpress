<div class="min-h-screen py-8">
  <div class="max-w-7xl mx-auto px-4">
   
    <nav class="mb-8">
      <%= link_to "Menu", categories_path, class: "text-mexican hover:underline" %> 
      <span class="text-gray-500 mx-2">/</span>
      <span class="text-gray-700"><%= @category.name %></span>
    </nav>

    <div class="bg-white rounded-lg shadow-lg p-8 mb-8">
      <div class="flex flex-col md:flex-row items-center">
        <% if @category.image_url.present? %>
          <img src="<%= @category.image_url %>" alt="<%= @category.name %>" class="w-32 h-32 rounded-full object-cover mb-4 md:mb-0 md:mr-6">
        <% else %>
          <div class="w-32 h-32 bg-mexican rounded-full flex items-center justify-center mb-4 md:mb-0 md:mr-6">
            <i class="fas fa-utensils text-4xl text-white"></i>
          </div>
        <% end %>
        
        <div class="text-center md:text-left">
          <h1 class="text-4xl font-bold text-gray-800 mb-2"><%= @category.name %></h1>
          <% if @category.description.present? %>
            <p class="text-gray-600 text-lg"><%= @category.description %></p>
          <% end %>
        </div>

        <% if current_user&.admin? %>
          <div class="ml-auto flex space-x-4">
            <%= link_to edit_category_path(@category), class: "text-blue-600 hover:text-blue-800" do %>
              <i class="fas fa-edit"></i>
            <% end %>
            <%= link_to category_path(@category), method: :delete, 
                data: { confirm: "Are you sure?" }, 
                class: "text-red-600 hover:text-red-800" do %>
              <i class="fas fa-trash"></i>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Menu Items -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <% @menu_items.each do |item| %>
        <div class="bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300">
          <% if item.image_url.present? %>
            <div class="h-48 bg-cover bg-center" style="background-image: url('<%= item.image_url %>')"></div>
          <% else %>
            <div class="h-48 bg-gradient-to-r from-yellow-400 to-orange-500 flex items-center justify-center">
              <i class="fas fa-pepper-hot text-4xl text-white"></i>
            </div>
          <% end %>
          
          <div class="p-6">
            <h3 class="text-xl font-semibold mb-2 text-gray-800"><%= item.name %></h3>
            <% if item.description.present? %>
              <p class="text-gray-600 mb-4 text-sm"><%= truncate(item.description, length: 100) %></p>
            <% end %>
            
            <div class="flex justify-between items-center">
              <span class="text-2xl font-bold text-mexican">$<%= sprintf("%.2f", item.price) %></span>
              
              <div class="flex space-x-2">
                <%= link_to menu_item_path(item), class: "text-blue-600 hover:text-blue-800" do %>
                  <i class="fas fa-eye"></i>
                <% end %>
                
                <% if user_signed_in? %>
                  <%= form_with url: order_items_path, method: :post, local: true, class: "inline" do |f| %>
                    <%= f.hidden_field :menu_item_id, value: item.id %>
                    <%= f.hidden_field :quantity, value: 1 %>
                    <%= f.submit "Add to Cart", class: "bg-mexican text-white px-4 py-2 rounded hover:bg-orange-600 transition-colors text-sm" %>
                  <% end %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>

    <% if @menu_items.empty? %>
      <div class="text-center py-12">
        <i class="fas fa-utensils text-4xl text-gray-400 mb-4"></i>
        <p class="text-gray-600 text-lg">No items available in this category yet.</p>
      </div>
    <% end %>

    <% if current_user&.admin? %>
      <div class="text-center mt-8">
        <%= link_to "Add New Menu Item", new_menu_item_path(category_id: @category.id), 
            class: "bg-mexican text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors" %>
      </div>
    <% end %>
  </div>
</div>